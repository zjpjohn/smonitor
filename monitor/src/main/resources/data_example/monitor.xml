<?xml version="1.0" encoding="UTF-8"?>
<monitor><!--数据存储模型-->
	<monitor name="能力测试主机" type="host" groupId="0">
		<props ip="172.21.10.40" port="22" username="uemall" passwd="uemall"/>
		<check_list>
			<check cronExpression="10 * * * * ?" name="nginx错误日志更新频繁" type="file" alarmTimes="3"> <!--一个检查项-->
				<attrs path="/uemall/zhaohl/zhao.txt" modify-in="2"/>
				<admin>
					<id>zhaohailong</id>
					<id>huangxiufeng</id>
				</admin>
			</check>
			<check name="nginx访问日志停止更新" type="file" alarmTimes="2">
				<attrs path="/uemall/zhaohl/zhao.txt" not-modify-in="2"/>
				<admin>
					<id>zhaohailong</id>
				</admin>
			</check>
			<check name="nginx错误日志增长" type="file" alarmTimes="2">
				<attrs path="/uemall/zhaohl/zhao.txt" rows-increase="2"/>
				<admin>
					<id>zhaohailong</id>
				</admin>
			</check>
			<check name="cpu使用率" type="cpu" alarmTimes="2">
				<attrs exceed="50"/>
				<admin>
					<id>zhaohailong</id>
				</admin>
			</check>
			<check name="内存使用率" type="mem" alarmTimes="2">
				<attrs exceed="50"/>
				<admin>
					<id>zhaohailong</id>
				</admin>
			</check>
			<check name="硬盘使用率" type="disk" alarmTimes="2">
				<attrs path="/home" exceed="90" inode-exceed="90"/>
				<admin>
					<id>zhaohailong</id>
				</admin>
			</check>
		</check_list>
	</monitor>



	<mongo name="支付mongodb服务" ip="" username="" password="" default-run-time="15 * * * * ?">
		<check name="检查mongodb命中率" type="？？"  run-time="10 * * * * ?" alarm-times="3">
			<less>80</less>
			<admin>
				<id>zhaohailong</id>
			</admin>
		</check>
	</mongo>
	
	<!-- 不同类型的数据库集合 -->
	<db name="支付平台数据库" type="mysql" url="jdbc:mysql://172.21.10.40:3306/database" username="uemall" passwd="uemall">
		<check name="订单表无新增记录" type="sql"  run-time="10 * * * * ?" alarm-times="3"  >
			<sql>
				<![CDATA[
					SELECT * FROM  ORDER T WHERE T.STATUS=0 AND T.CREATE_TIME  TIME-5
				]]>
			</sql>
			<result rule="lt">0</result>
			<admin>
				<id>zhaohailong</id>
			</admin>
		</check>
	</db>
	
	
	<inspection name="系统自检" default-run-time="15 * * * * ?">
		<check name="通知模块正常" type="self" run-time="10 * * * * ?">
			<admin>
				<id>zhaohailong</id>
			</admin>
		</check>
	</inspection>

	<http name="http服务调用"  default-run-time="15 * * * * ?" method="post" url="http://eip.teamshub.com/home" data="">
		<check name="返回码" type="code" run-time="10 * * * * ?"  alarm-times="2">
			<not>200</not>
			<admin>
				<id>zhaohailong</id>
			</admin>
		</check>
		<check name="返回报文" type="body" alarm-times="2">
			<contains> <!--如果返回包含以下关键字，则告警（没有配置关键字，则全部告警）-->
				<key-word>html</key-word>
				<key-word>script</key-word>
			</contains>
			<exclude><!--如果返回包含以下关键字，则不告警-->
				<key-word>1234zhaohl</key-word>
			</exclude>
			<admin>
				<id>zhaohailong</id>
			</admin>
		</check>
	</http>
</monitor>

<!-- 
执行时间表达式：
格式：  
	秒 分钟 小时 日期 月份 星期 年（可选）
例如：
	"*/5  *  * * * ?"   每5s运行一次
	"10 *  * * * ?"   每分钟10s时运行
	"0  0 12 * * ?"   每天12点运行
	"0 15 10 ? * *"   每天10:15运行
	"0 0/5 14 * * ?"  每天14点到15点每5分钟运行一次，开始于14:00，结束于14:55。
	"0 15 10 ? * 6L"  每月最后一个星期五10:15分运行
 -->